<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.0.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://congsheng.wang').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":true,"show_result":true,"style":"mac"},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: 'search.xml',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="1. èƒŒæ™¯æœ¬æ–‡æ‰¿æ¥ä¸Šæ–‡ï¼Œæ¥ç»§ç»­è¯´è¯´ IOC å’Œ AOP çš„ä»¿å†™ã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¾ˆç®€å•çš„ IOC å’Œ AOP å®¹å™¨ã€‚ä¸Šæ–‡å®ç°çš„ IOC å’Œ AOP åŠŸèƒ½å¾ˆå•ä¸€ï¼Œä¸” IOC å’Œ AOP ä¸¤ä¸ªæ¨¡å—æ²¡æœ‰æ•´åˆåˆ°ä¸€èµ·ã€‚IOC åœ¨åŠ è½½ bean è¿‡ç¨‹ä¸­ï¼ŒAOP ä¸èƒ½å¯¹ bean ç»‡å…¥é€šçŸ¥ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´ä¸€ä¸‹å‡çº§ç‰ˆ IOC å’Œ AOPã€‚è¿™ä¸ªç‰ˆæœ¬çš„å®ç°åŒ…å«äº†åœ¨ä¸Šç¯‡ä¸­æ‰€è¯´çš„åŠŸèƒ½ï¼Œè¿™é‡Œå†é‡è¿°ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š">
<meta name="keywords" content="AOP,IoC">
<meta property="og:type" content="article">
<meta property="og:title" content="è‡ªå·±åŠ¨æ‰‹å®ç°çš„ Spring IOC å’Œ AOPï¼ˆä¸‹ï¼‰">
<meta property="og:url" content="http:&#x2F;&#x2F;congsheng.wang&#x2F;2020&#x2F;01&#x2F;08&#x2F;%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP%EF%BC%88%E4%B8%8B%EF%BC%89&#x2F;index.html">
<meta property="og:site_name" content="congshengçš„åšå®¢">
<meta property="og:description" content="1. èƒŒæ™¯æœ¬æ–‡æ‰¿æ¥ä¸Šæ–‡ï¼Œæ¥ç»§ç»­è¯´è¯´ IOC å’Œ AOP çš„ä»¿å†™ã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¾ˆç®€å•çš„ IOC å’Œ AOP å®¹å™¨ã€‚ä¸Šæ–‡å®ç°çš„ IOC å’Œ AOP åŠŸèƒ½å¾ˆå•ä¸€ï¼Œä¸” IOC å’Œ AOP ä¸¤ä¸ªæ¨¡å—æ²¡æœ‰æ•´åˆåˆ°ä¸€èµ·ã€‚IOC åœ¨åŠ è½½ bean è¿‡ç¨‹ä¸­ï¼ŒAOP ä¸èƒ½å¯¹ bean ç»‡å…¥é€šçŸ¥ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´ä¸€ä¸‹å‡çº§ç‰ˆ IOC å’Œ AOPã€‚è¿™ä¸ªç‰ˆæœ¬çš„å®ç°åŒ…å«äº†åœ¨ä¸Šç¯‡ä¸­æ‰€è¯´çš„åŠŸèƒ½ï¼Œè¿™é‡Œå†é‡è¿°ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;8ebb5.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;5ef85.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;2c018.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;ed39d.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;ab082.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;915b2.png">
<meta property="og:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;e4614.png">
<meta property="og:updated_time" content="2020-01-08T05:40:21.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http:&#x2F;&#x2F;image.winrains.cn&#x2F;2019&#x2F;11&#x2F;8ebb5.png">

<link rel="canonical" href="http://congsheng.wang/2020/01/08/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP%EF%BC%88%E4%B8%8B%EF%BC%89/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>è‡ªå·±åŠ¨æ‰‹å®ç°çš„ Spring IOC å’Œ AOPï¼ˆä¸‹ï¼‰ | congshengçš„åšå®¢</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">congshengçš„åšå®¢</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">æ¬¢è¿è®¿é—®ï¼šwinrains.cn</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>æ ‡ç­¾<span class="badge">156</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>åˆ†ç±»<span class="badge">94</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>å½’æ¡£<span class="badge">984</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>æœç´¢
        </a>
      </li>
  </ul>

</nav>
  <div class="site-search">
    <div class="popup search-popup">
    <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocorrect="off" autocapitalize="none"
           placeholder="æœç´¢..." spellcheck="false"
           type="text" id="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result"></div>

</div>
<div class="search-pop-overlay"></div>

  </div>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://congsheng.wang/2020/01/08/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP%EF%BC%88%E4%B8%8B%EF%BC%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="congsheng.wang">
      <meta itemprop="description" content="trouble is a friend">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="congshengçš„åšå®¢">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          è‡ªå·±åŠ¨æ‰‹å®ç°çš„ Spring IOC å’Œ AOPï¼ˆä¸‹ï¼‰
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2020-01-08 13:40:21" itemprop="dateCreated datePublished" datetime="2020-01-08T13:40:21+08:00">2020-01-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring%E6%8A%80%E6%9C%AF/" itemprop="url" rel="index">
                    <span itemprop="name">SpringæŠ€æœ¯</span>
                  </a>
                </span>
                  ï¼Œ
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring%E6%8A%80%E6%9C%AF/Spring/" itemprop="url" rel="index">
                    <span itemprop="name">Spring</span>
                  </a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="1-èƒŒæ™¯"><a href="#1-èƒŒæ™¯" class="headerlink" title="1. èƒŒæ™¯"></a>1. èƒŒæ™¯</h1><p>æœ¬æ–‡æ‰¿æ¥<a href="http://www.coolblog.xyz/2018/01/18/è‡ªå·±åŠ¨æ‰‹å®ç°çš„-Spring-IOC-å’Œ-AOP-ä¸Šç¯‡/" target="_blank" rel="noopener">ä¸Šæ–‡</a>ï¼Œæ¥ç»§ç»­è¯´è¯´ IOC å’Œ AOP çš„ä»¿å†™ã€‚åœ¨ä¸Šæ–‡ä¸­ï¼Œæˆ‘å®ç°äº†ä¸€ä¸ªå¾ˆç®€å•çš„ IOC å’Œ AOP å®¹å™¨ã€‚ä¸Šæ–‡å®ç°çš„ IOC å’Œ AOP åŠŸèƒ½å¾ˆå•ä¸€ï¼Œä¸” IOC å’Œ AOP ä¸¤ä¸ªæ¨¡å—æ²¡æœ‰æ•´åˆåˆ°ä¸€èµ·ã€‚IOC åœ¨åŠ è½½ bean è¿‡ç¨‹ä¸­ï¼ŒAOP ä¸èƒ½å¯¹ bean ç»‡å…¥é€šçŸ¥ã€‚åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬è¯¦ç»†è¯´ä¸€ä¸‹å‡çº§ç‰ˆ IOC å’Œ AOPã€‚è¿™ä¸ªç‰ˆæœ¬çš„å®ç°åŒ…å«äº†åœ¨ä¸Šç¯‡ä¸­æ‰€è¯´çš„åŠŸèƒ½ï¼Œè¿™é‡Œå†é‡è¿°ä¸€ä¸‹ï¼Œå¦‚ä¸‹ï¼š</p>
<ol>
<li>æ ¹æ® xml é…ç½®æ–‡ä»¶åŠ è½½ç›¸å…³ bean</li>
<li>å¯¹ BeanPostProcessor ç±»å‹çš„ bean æä¾›æ”¯æŒ</li>
<li>å¯¹ BeanFactoryAware ç±»å‹çš„ bean æä¾›æ”¯æŒ</li>
<li>å®ç°äº†åŸºäº JDK åŠ¨æ€ä»£ç†çš„ AOP</li>
<li>æ•´åˆäº† IOC å’Œ AOPï¼Œä½¿å¾—äºŒè€…å¯å¾ˆå¥½çš„ååŒå·¥ä½œ</li>
</ol>
<p>ä¸Šé¢ç½—åˆ—äº†5ä¸ªåŠŸèƒ½ç‚¹ï¼Œè™½ç„¶çœ‹èµ·æ¥ä¸å¤šï¼Œä½†æ˜¯å¯¹äºæ–°æ‰‹æ¥è¯´ï¼Œå®ç°èµ·æ¥è¿˜æ˜¯ä¸å¾ˆå®¹æ˜“çš„ã€‚æ‰€ä»¥æ¥ä¸‹æ¥ï¼Œæˆ‘å°†å›´ç»•ä¸Šé¢çš„åŠŸèƒ½ç‚¹å±•å¼€è¯¦ç»†çš„æè¿°ã€‚å¦‚æœå¤§å®¶æœ‰å…´è¶£ï¼Œæˆ‘è¿˜æ˜¯å¾ˆå»ºè®®å¤§å®¶è·Ÿç€å†™ä¸€éï¼Œå› ä¸ºå¾ˆå¤šæ—¶å€™èƒ½çœ‹æ‡‚ï¼Œä½†æ˜¯å†™çš„å´ä¸ä¸€å®šèƒ½å†™å‡ºæ¥ã€‚ä»¿å†™ä¸€éèƒ½å¤ŸåŠ æ·±å¯¹ Spring IOC å’Œ AOP åŸç†çš„ç†è§£ï¼Œå¤šåŠ¨æ‰‹æ˜¯æœ‰å¥½å¤„çš„ã€‚<br>å¦å¤–éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œé»„äº¿åå‰è¾ˆå®ç°çš„ <a href="https://github.com/code4craft/tiny-spring" target="_blank" rel="noopener">tiny-spring</a> é¡¹ç›®æ—¶é—´èŠ‚ç‚¹æ˜¯ 2014.1ï¼Œå½“æ—¶åº”è¯¥æ˜¯å‚ç…§ Spring 3.x ç‰ˆæœ¬ç¼–å†™çš„ã€‚éƒ¨åˆ†ç±»çš„è®¾è®¡æ€æƒ³å¯èƒ½ä¼šä¸ç°åœ¨æœ€æ–°ç¨³å®šç‰ˆ 4.3.10 æœ‰ä¸€å®šçš„å‡ºå…¥ï¼Œç”±äºæˆ‘æš‚æ—¶æ²¡æœ‰é˜…è¯» Spring æºç çš„è®¡åˆ’ï¼Œæ‰€ä»¥è¿™é‡Œä¸èƒ½å‘ŠçŸ¥å¤§å®¶ <a href="https://github.com/code4craft/tiny-spring" target="_blank" rel="noopener">tiny-spring</a> å“ªäº›ç±»ä¸ Spring æœ€æ–°çš„æºç æœ‰å‡ºå…¥ï¼Œè§è°…ã€‚<br>å¥½äº†ï¼Œæœ¬ç« å†…å®¹å…ˆä»‹ç»åˆ°è¿™ï¼Œæ¥ä¸‹æ¥è¿›å…¥æ­£æ–‡ã€‚</p>
<a id="more"></a>

<h1 id="2-IOC-çš„å®ç°"><a href="#2-IOC-çš„å®ç°" class="headerlink" title="2. IOC çš„å®ç°"></a>2. IOC çš„å®ç°</h1><h2 id="2-1-BeanFactory-çš„ç”Ÿå‘½æµç¨‹"><a href="#2-1-BeanFactory-çš„ç”Ÿå‘½æµç¨‹" class="headerlink" title="2.1 BeanFactory çš„ç”Ÿå‘½æµç¨‹"></a>2.1 BeanFactory çš„ç”Ÿå‘½æµç¨‹</h2><p>ä¸Šé¢ç®€è¿°äº† toy-spring é¡¹ç›®çš„ç¼–ç èƒŒæ™¯ï¼Œæ¥ä¸‹æ¥ï¼Œåœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†å‘å¤§å®¶ä»‹ç» toy-spring é¡¹ç›®ä¸­ IOC éƒ¨åˆ†çš„å®ç°åŸç†ã€‚åœ¨è¯¦ç»†ä»‹ç» IOC çš„å®ç°åŸç†å‰ï¼Œè¿™é‡Œå…ˆç®€å•è¯´ä¸€ä¸‹ BeanFactory çš„ç”Ÿå‘½æµç¨‹ï¼š</p>
<ol>
<li>BeanFactory åŠ è½½ Bean é…ç½®æ–‡ä»¶ï¼Œå°†è¯»åˆ°çš„ Bean é…ç½®å°è£…æˆ BeanDefinition å¯¹è±¡</li>
<li>å°†å°è£…å¥½çš„ BeanDefinition å¯¹è±¡æ³¨å†Œåˆ° BeanDefinition å®¹å™¨ä¸­</li>
<li>æ³¨å†Œ BeanPostProcessor ç›¸å…³å®ç°ç±»åˆ° BeanPostProcessor å®¹å™¨ä¸­</li>
<li>BeanFactory è¿›å…¥å°±ç»ªçŠ¶æ€</li>
<li>å¤–éƒ¨è°ƒç”¨ BeanFactory çš„ getBean(String name) æ–¹æ³•ï¼ŒBeanFactory ç€æ‰‹å®ä¾‹åŒ–ç›¸åº”çš„ bean</li>
<li>é‡å¤æ­¥éª¤ 3 å’Œ 4ï¼Œç›´è‡³ç¨‹åºé€€å‡ºï¼ŒBeanFactory è¢«é”€æ¯</li>
</ol>
<p>ä¸Šé¢ç®€å•ç½—åˆ—äº† BeanFactory çš„ç”Ÿå‘½æµç¨‹ï¼Œä¹Ÿå°±æ˜¯ IOC å®¹å™¨çš„ç”Ÿå‘½æµç¨‹ã€‚æ¥ä¸‹æ¥å°±æ¥å›´ç»•ä¸Šé¢çš„æµç¨‹å±•å¼€è®¨è®ºã€‚</p>
<h2 id="2-2-BeanDefinition-åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»"><a href="#2-2-BeanDefinition-åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»" class="headerlink" title="2.2 BeanDefinition åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»"></a>2.2 BeanDefinition åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»</h2><p>åœ¨è¯¦ç»†ä»‹ç» IOC å®¹å™¨çš„å·¥ä½œåŸç†å‰ï¼Œè¿™é‡Œå…ˆä»‹ç»ä¸€ä¸‹å®ç° IOC æ‰€ç”¨åˆ°çš„ä¸€äº›è¾…åŠ©ç±»ï¼ŒåŒ…æ‹¬BeanDefinitionã€BeanReferenceã€PropertyValuesã€PropertyValueã€‚è¿™äº›ç±»ä¸æ¥ä¸‹æ¥çš„ 2.3 èŠ‚ xml çš„è§£æç´§å¯†ç›¸å…³ã€‚æŒ‰ç…§é¡ºåºï¼Œå…ˆä» BeanDefinition å¼€å§‹ä»‹ç»ã€‚<br>BeanDefinitionï¼Œä»å­—é¢æ„æ€ä¸Šç¿»è¯‘æˆä¸­æ–‡å°±æ˜¯ â€œBean çš„å®šä¹‰â€ã€‚ä»ç¿»è¯‘ç»“æœä¸­å°±å¯ä»¥çŒœå‡ºè¿™ä¸ªç±»çš„ç”¨é€”ï¼Œå³æ ¹æ® Bean é…ç½®ä¿¡æ¯ç”Ÿæˆç›¸åº”çš„ Bean è¯¦æƒ…å¯¹è±¡ã€‚ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæŠŠ Bean æ¯”ä½œæ˜¯ç”µè„‘ ğŸ’»ï¼Œé‚£ä¹ˆ BeanDefinition å°±æ˜¯è¿™å°ç”µè„‘çš„é…ç½®æ¸…å•ã€‚æˆ‘ä»¬ä»å¤–è§‚ä¸Šæ— æ³•çœ‹å‡ºè¿™å°ç”µè„‘é‡Œé¢éƒ½æœ‰å“ªäº›é…ç½®ï¼Œä¹Ÿçœ‹ä¸å‡ºç”µè„‘çš„æ€§èƒ½å’‹æ ·ã€‚ä½†æ˜¯é€šè¿‡é…ç½®æ¸…å•ï¼Œæˆ‘ä»¬å°±å¯äº†è§£è¿™å°ç”µè„‘çš„è¯¦ç»†é…ç½®ã€‚æˆ‘ä»¬å¯ä»¥çŸ¥é“è¿™å°ç”µè„‘æ˜¯ä¸æ˜¯ç”¨äº†ç‰™è†å‚çš„ CPUï¼ŒBOOM å‚çš„å›ºæ€ç¡¬ç›˜ç­‰ã€‚é€è¿‡é…ç½®æ¸…å•ï¼Œæˆ‘ä»¬ä¹Ÿå°±å¯å¤§è‡´è¯„ä¼°å‡ºè¿™å°ç”µè„‘çš„æ€§èƒ½ã€‚<br><img src="http://image.winrains.cn/2019/11/8ebb5.png" alt="img"><br>å›¾1 ç”µè„‘å’Œé…ç½®æ¸…å•<br>ä¸Šé¢é‚£ä¸ªä¾‹å­è¿˜æ˜¯æ¯”è¾ƒè´´åˆ‡çš„ï¼Œä½†æ˜¯åªæ˜¯ä¸ªä¾‹å­ï¼Œå’Œå®é™…è¿˜æ˜¯æœ‰å·®è·çš„ã€‚é‚£ä¹ˆåœ¨å…·ä½“å®ç°ä¸­ï¼ŒBeanDefinition å’Œ xml æ˜¯æ€ä¹ˆå¯¹åº”çš„å‘¢ï¼Ÿç­”æ¡ˆåœ¨ä¸‹é¢ï¼š<br><img src="http://image.winrains.cn/2019/11/5ef85.png" alt="img"><br>å›¾2 æ ¹æ® bean é…ç½®ç”Ÿæˆ BeanDefinition<br>çœ‹å®Œä¸Šå›¾ï¼Œæˆ‘æƒ³å¤§å®¶å¯¹ BeanDefinition çš„ç”¨é€”æœ‰äº†æ›´è¿›ä¸€æ­¥çš„è®¤è¯†ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¯´è¯´ä¸Šå›¾ä¸­çš„ ref å¯¹åº”çš„ BeanReference å¯¹è±¡ã€‚BeanReference å¯¹è±¡ä¿å­˜çš„æ˜¯ bean é…ç½®ä¸­ ref å±æ€§å¯¹åº”çš„å€¼ï¼Œåœ¨åç»­ BeanFactory å®ä¾‹åŒ– bean æ—¶ï¼Œä¼šæ ¹æ® BeanReference ä¿å­˜çš„å€¼å»å®ä¾‹åŒ– bean æ‰€ä¾èµ–çš„å…¶ä»– beanã€‚<br>æ¥ä¸‹æ¥è¯´è¯´ PropertyValues å’Œ PropertyValue è¿™ä¸¤ä¸ªé•¿çš„æ¯”è¾ƒåƒçš„ç±»ï¼Œé¦–å…ˆæ˜¯PropertyValueã€‚PropertyValue ä¸­æœ‰ä¸¤ä¸ªå­—æ®µ name å’Œ valueï¼Œç”¨äºè®°å½• bean é…ç½®ä¸­çš„æ ‡ç­¾çš„å±æ€§å€¼ã€‚ç„¶åæ˜¯PropertyValuesï¼ŒPropertyValues ä»å­—é¢æ„æ€ä¸Šæ¥çœ‹ï¼Œæ˜¯ PropertyValue å¤æ•°å½¢å¼ï¼Œåœ¨åŠŸèƒ½ä¸Šç­‰åŒäº Listã€‚é‚£ä¹ˆä¸ºä»€ä¹ˆ Spring ä¸ç›´æ¥ä½¿ç”¨ Listï¼Œè€Œè‡ªå·±å®šä¹‰ä¸€ä¸ªæ–°ç±»å‘¢ï¼Ÿç­”æ¡ˆæ˜¯è¦è·å¾—ä¸€å®šçš„æ§åˆ¶æƒï¼Œçœ‹ä¸‹é¢çš„ä»£ç ï¼š</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">PropertyValues</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> final List&lt;PropertyValue&gt; propertyValueList = <span class="keyword">new</span> ArrayList&lt;PropertyValue&gt;();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addPropertyValue</span>(<span class="params">PropertyValue pv</span>)</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// åœ¨è¿™é‡Œå¯ä»¥å¯¹å‚æ•°å€¼ pv åšä¸€äº›å¤„ç†ï¼Œå¦‚æœç›´æ¥ä½¿ç”¨ Listï¼Œåˆ™å°±ä¸è¡Œäº†</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.propertyValueList.<span class="keyword">add</span>(pv);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> List&lt;PropertyValue&gt; <span class="title">getPropertyValues</span>(<span class="params"></span>)</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.propertyValueList;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>å¥½äº†ï¼Œè¾…åŠ©ç±»ä»‹ç»å®Œäº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬ç»§ç»­ BeanFactory çš„ç”Ÿå‘½æµç¨‹æ¢ç´¢ã€‚</p>
<h2 id="2-3-xml-çš„è§£æ"><a href="#2-3-xml-çš„è§£æ" class="headerlink" title="2.3 xml çš„è§£æ"></a>2.3 xml çš„è§£æ</h2><p>BeanFactory åˆå§‹åŒ–æ—¶ï¼Œä¼šæ ¹æ®ä¼ å…¥çš„ xml é…ç½®æ–‡ä»¶è·¯å¾„åŠ è½½å¹¶è§£æé…ç½®æ–‡ä»¶ã€‚ä½†æ˜¯åŠ è½½å’Œè§£æ xml é…ç½®æ–‡ä»¶è¿™ç§è„æ´»ç´¯æ´»ï¼ŒBeanFactory å¯ä¸å¤ªæ„¿æ„å¹²ï¼Œå®ƒåªæƒ³é«˜å†·çš„ç®¡ç†å®¹å™¨ä¸­çš„ beanã€‚äºæ˜¯ BeanFactory å°†åŠ è½½å’Œè§£æé…ç½®æ–‡ä»¶çš„ä»»åŠ¡å§”æ‰˜ç»™ä¸“èŒäººå‘˜ BeanDefinitionReader çš„å®ç°ç±» XmlBeanDefinitionReader å»åšã€‚é‚£ä¹ˆ XmlBeanDefinitionReader å…·ä½“æ˜¯æ€ä¹ˆåšçš„å‘¢ï¼ŸXmlBeanDefinitionReader åšäº†å¦‚ä¸‹å‡ ä»¶äº‹æƒ…ï¼š</p>
<ol>
<li>å°† xml é…ç½®æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­</li>
<li>è·å–æ ¹æ ‡ç­¾ä¸‹æ‰€æœ‰çš„æ ‡ç­¾</li>
<li>éå†è·å–åˆ°çš„æ ‡ç­¾åˆ—è¡¨ï¼Œå¹¶ä»æ ‡ç­¾ä¸­è¯»å– idï¼Œclass å±æ€§</li>
<li>åˆ›å»º BeanDefinition å¯¹è±¡ï¼Œå¹¶å°†åˆšåˆšè¯»å–åˆ°çš„ idï¼Œclass å±æ€§å€¼ä¿å­˜åˆ°å¯¹è±¡ä¸­</li>
<li>éå†æ ‡ç­¾ä¸‹çš„æ ‡ç­¾ï¼Œä»ä¸­è¯»å–å±æ€§å€¼ï¼Œå¹¶ä¿æŒåœ¨ BeanDefinition å¯¹è±¡ä¸­</li>
<li>å°† &lt;id, BeanDefinition&gt; é”®å€¼å¯¹ç¼“å­˜åœ¨ Map ä¸­ï¼Œç•™ä½œåç”¨</li>
<li>é‡å¤3ã€4ã€5ã€6æ­¥ï¼Œç›´è‡³è§£æç»“æŸ</li>
</ol>
<p>ä¸Šé¢çš„è§£ææ­¥éª¤å¹¶ä¸å¤æ‚ï¼Œå®ç°èµ·æ¥ä¹Ÿä¸éš¾ï¼Œå°±æ˜¯è§£æ xml è€Œå·²ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šå™è¿°äº†ã€‚</p>
<h2 id="2-4-æ³¨å†Œ-BeanPostProcessor"><a href="#2-4-æ³¨å†Œ-BeanPostProcessor" class="headerlink" title="2.4 æ³¨å†Œ BeanPostProcessor"></a>2.4 æ³¨å†Œ BeanPostProcessor</h2><p>BeanPostProcessor æ¥å£æ˜¯ Spring å¯¹å¤–æ‹“å±•çš„æ¥å£ä¹‹ä¸€ï¼Œå…¶ä¸»è¦ç”¨é€”æä¾›ä¸€ä¸ªæœºä¼šï¼Œè®©å¼€å‘äººå‘˜èƒ½å¤Ÿæ’æ‰‹ bean çš„å®ä¾‹åŒ–è¿‡ç¨‹ã€‚é€šè¿‡å®ç°è¿™ä¸ªæ¥å£ï¼Œæˆ‘ä»¬å°±å¯åœ¨ bean å®ä¾‹åŒ–æ—¶ï¼Œå¯¹bean è¿›è¡Œä¸€äº›å¤„ç†ã€‚æ¯”å¦‚ï¼Œæˆ‘ä»¬æ‰€ç†Ÿæ‚‰çš„ AOP å°±æ˜¯åœ¨è¿™é‡Œå°†åˆ‡é¢é€»è¾‘ç»‡å…¥ç›¸å…³ bean ä¸­çš„ã€‚æ­£æ˜¯å› ä¸ºæœ‰äº† BeanPostProcessor æ¥å£ä½œä¸ºæ¡¥æ¢ï¼Œæ‰ä½¿å¾— AOP å¯ä»¥å’Œ IOC å®¹å™¨äº§ç”Ÿè”ç³»ã€‚å…³äºè¿™ä¸€ç‚¹ï¼Œæˆ‘å°†ä¼šåœ¨åç»­ç« èŠ‚è¯¦ç»†è¯´æ˜ã€‚<br>æ¥ä¸‹æ¥è¯´è¯´ BeanFactory æ˜¯æ€ä¹ˆæ³¨å†Œ BeanPostProcessor ç›¸å…³å®ç°ç±»çš„ã€‚<br>XmlBeanDefinitionReader åœ¨å®Œæˆè§£æå·¥ä½œåï¼ŒBeanFactory ä¼šå°†å®ƒè§£æå¾—åˆ°çš„ &lt;id, BeanDefinition&gt; é”®å€¼å¯¹æ³¨å†Œåˆ°è‡ªå·±çš„ beanDefinitionMap ä¸­ã€‚BeanFactory æ³¨å†Œå¥½ BeanDefinition åï¼Œå°±ç«‹å³å¼€å§‹æ³¨å†Œ BeanPostProcessor ç›¸å…³å®ç°ç±»ã€‚è¿™ä¸ªè¿‡ç¨‹æ¯”è¾ƒç®€å•ï¼š</p>
<ol>
<li>æ ¹æ® BeanDefinition è®°å½•çš„ä¿¡æ¯ï¼Œå¯»æ‰¾æ‰€æœ‰å®ç°äº† BeanPostProcessor æ¥å£çš„ç±»ã€‚</li>
<li>å®ä¾‹åŒ– BeanPostProcessor æ¥å£çš„å®ç°ç±»</li>
<li>å°†å®ä¾‹åŒ–å¥½çš„å¯¹è±¡æ”¾å…¥ Listä¸­</li>
<li>é‡å¤2ã€3æ­¥ï¼Œç›´è‡³æ‰€æœ‰çš„å®ç°ç±»å®Œæˆæ³¨å†Œ</li>
</ol>
<p>ä¸Šé¢ç®€è¿°äº† BeanPostProcessor æ¥å£çš„ç”¨é€”ä»¥åŠæ³¨å†Œçš„è¿‡ç¨‹ã€‚BeanPostProcessor æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¸¸ç”¨æ¥å£ï¼Œç›¸ä¿¡å¤§å®¶éƒ½å¾ˆç†Ÿæ‚‰äº†ï¼Œè¿™é‡Œå°±ä¸è¿‡å¤šå™è¿°äº†ã€‚</p>
<h2 id="2-5-getBean-è¿‡ç¨‹è§£æ"><a href="#2-5-getBean-è¿‡ç¨‹è§£æ" class="headerlink" title="2.5 getBean è¿‡ç¨‹è§£æ"></a>2.5 getBean è¿‡ç¨‹è§£æ</h2><p>åœ¨å®Œæˆäº† xml çš„è§£æã€BeanDefinition çš„æ³¨å†Œä»¥åŠ BeanPostProcessor çš„æ³¨å†Œè¿‡ç¨‹åã€‚BeanFactory åˆå§‹åŒ–çš„å·¥ä½œç®—æ˜¯ç»“æŸäº†ï¼Œæ­¤æ—¶ BeanFactory å¤„äºå°±ç»ªçŠ¶æ€ï¼Œç­‰å¾…å¤–éƒ¨ç¨‹åºçš„è°ƒç”¨ã€‚<br>å¤–éƒ¨ç¨‹åºä¸€èˆ¬éƒ½æ˜¯é€šè¿‡è°ƒç”¨ BeanFactory çš„ getBean(String name) æ–¹æ³•æ¥è·å–å®¹å™¨ä¸­çš„ beanã€‚BeanFactory å…·æœ‰å»¶è¿Ÿå®ä¾‹åŒ– bean çš„ç‰¹æ€§ï¼Œä¹Ÿå°±æ˜¯ç­‰å¤–éƒ¨ç¨‹åºéœ€è¦çš„æ—¶å€™ï¼Œæ‰å®ä¾‹åŒ–ç›¸å…³çš„ beanã€‚è¿™æ ·åšçš„å¥½å¤„æ˜¯æ¯”è¾ƒæ˜¾è€Œæ˜“è§çš„ï¼Œç¬¬ä¸€æ˜¯æé«˜äº† BeanFactory çš„åˆå§‹åŒ–é€Ÿåº¦ï¼Œç¬¬äºŒæ˜¯èŠ‚çœäº†å†…å­˜èµ„æºã€‚ä¸‹é¢æˆ‘ä»¬å°±æ¥è¯¦ç»†è¯´è¯´ bean çš„å®ä¾‹åŒ–è¿‡ç¨‹ï¼š<br><img src="http://image.winrains.cn/2019/11/2c018.png" alt="beanå®ä¾‹åŒ–è¿‡ç¨‹"><br>å›¾3 Spring beanå®ä¾‹åŒ–è¿‡ç¨‹<br>ä¸Šå›¾æ˜¯ä¸€ä¸ªå®Œæ•´çš„ Spring bean å®ä¾‹åŒ–è¿‡ç¨‹å›¾ã€‚åœ¨æˆ‘çš„ä»¿å†™é¡¹ç›®ä¸­ï¼Œæ²¡æœ‰åšçš„è¿™ä¹ˆå¤æ‚ï¼Œç®€åŒ–äº† bean å®ä¾‹åŒ–çš„è¿‡ç¨‹ï¼Œå¦‚ä¸‹ï¼š<br><img src="http://image.winrains.cn/2019/11/ed39d.png" alt="img"><br>å›¾4 toy-spring beanå®ä¾‹åŒ–è¿‡ç¨‹<br>æ¥ä¸‹æ¥æˆ‘å°†æŒ‰ç…§ç®€åŒ–åçš„ bean å®ä¾‹åŒ–è¿‡ç¨‹ä»‹ç»ï¼Œå¦‚æœæƒ³äº†è§£å®Œæ•´çš„ bean å®ä¾‹åŒ–è¿‡ç¨‹ï¼Œå¯ä»¥å‚è€ƒæˆ‘çš„å¦ä¸€ç¯‡æ–‡ç« ï¼š<a href="https://segmentfault.com/a/1190000010734016" target="_blank" rel="noopener">Spring beançš„ç”Ÿå‘½æµç¨‹</a>ã€‚ç®€åŒ–åçš„å®ä¾‹åŒ–æµç¨‹å¦‚ä¸‹ï¼š</p>
<ol>
<li>å®ä¾‹åŒ– bean å¯¹è±¡ï¼Œç±»ä¼¼äº new XXObject()</li>
<li>å°†é…ç½®æ–‡ä»¶ä¸­é…ç½®çš„å±æ€§å¡«å……åˆ°åˆšåˆšåˆ›å»ºçš„ bean å¯¹è±¡ä¸­</li>
<li>æ£€æŸ¥ bean å¯¹è±¡æ˜¯å¦å®ç°äº† Aware ä¸€ç±»çš„æ¥å£ï¼Œå¦‚æœå®ç°äº†åˆ™æŠŠç›¸åº”çš„ä¾èµ–è®¾ç½®åˆ° bean å¯¹è±¡ä¸­ã€‚toy-spring ç›®å‰ä»…å¯¹ BeanFactoryAware æ¥å£å®ç°ç±»æä¾›äº†æ”¯æŒ</li>
<li>è°ƒç”¨ BeanPostProcessor å‰ç½®å¤„ç†æ–¹æ³•ï¼Œå³ postProcessBeforeInitialization(Object bean, String beanName)</li>
<li>è°ƒç”¨ BeanPostProcessor åç½®å¤„ç†æ–¹æ³•ï¼Œå³ postProcessAfterInitialization(Object bean, String beanName)</li>
<li>bean å¯¹è±¡å¤„äºå°±ç»ªçŠ¶æ€ï¼Œå¯ä»¥ä½¿ç”¨äº†</li>
</ol>
<p>ä¸Šé¢ 6 æ­¥æµç¨‹å¹¶ä¸å¤æ‚ï¼Œæºç å®ç°çš„ä¹Ÿè¾ƒä¸ºç®€å•ï¼Œè¿™é‡Œå°±ä¸åœ¨è´´ä»£ç è¯´æ˜äº†ã€‚å¤§å®¶å¦‚æœæƒ³äº†è§£ç»†èŠ‚ï¼Œå¯ä»¥å» github ä¸Šä¸‹è½½ <a href="https://github.com/code4wt/toy-spring" target="_blank" rel="noopener">toy-spring</a> æºç é˜…è¯»ã€‚</p>
<h1 id="3-å®ç°-AOP"><a href="#3-å®ç°-AOP" class="headerlink" title="3. å®ç° AOP"></a>3. å®ç° AOP</h1><h2 id="3-1-AOP-åŸç†"><a href="#3-1-AOP-åŸç†" class="headerlink" title="3.1 AOP åŸç†"></a>3.1 AOP åŸç†</h2><p>AOP æ˜¯åŸºäºåŠ¨æ€ä»£ç†æ¨¡å¼å®ç°çš„ï¼Œå…·ä½“å®ç°ä¸Šå¯ä»¥åŸºäº JDK åŠ¨æ€ä»£ç†æˆ–è€… Cglib åŠ¨æ€ä»£ç†ã€‚å…¶ä¸­ JDK åŠ¨æ€ä»£ç†åªèƒ½ä»£ç†å®ç°äº†æ¥å£çš„å¯¹è±¡ï¼Œè€Œ Cglib åŠ¨æ€ä»£ç†åˆ™æ— æ­¤é™åˆ¶ã€‚æ‰€ä»¥åœ¨ä¸ºæ²¡æœ‰å®ç°æ¥å£çš„å¯¹è±¡ç”Ÿæˆä»£ç†æ—¶ï¼Œåªèƒ½ä½¿ç”¨ Cglibã€‚åœ¨ toy-spring é¡¹ç›®ä¸­ï¼Œæš‚æ—¶åªå®ç°äº†åŸºäº JDK åŠ¨æ€ä»£ç†çš„ä»£ç†å¯¹è±¡ç”Ÿæˆå™¨ã€‚<br>å…³äº AOP åŸç†è¿™é‡Œå°±ä¸å¤šè¯´äº†ï¼Œä¸‹é¢è¯´è¯´ toy-spring ä¸­ AOP çš„å®ç°æ­¥éª¤ã€‚è¿˜æ˜¯åƒä¸Šé¢ä¸€æ ·ï¼Œå…ˆåˆ—æµç¨‹ï¼š</p>
<ol>
<li>AOP é€»è¾‘ä»‹å…¥ BeanFactory å®ä¾‹åŒ– bean çš„è¿‡ç¨‹</li>
<li>æ ¹æ® Pointcut å®šä¹‰çš„åŒ¹é…è§„åˆ™ï¼Œåˆ¤æ–­å½“å‰æ­£åœ¨å®ä¾‹åŒ–çš„ bean æ˜¯å¦ç¬¦åˆè§„åˆ™</li>
<li>å¦‚æœç¬¦åˆï¼Œä»£ç†ç”Ÿæˆå™¨å°†åˆ‡é¢é€»è¾‘ Advice ç»‡å…¥ bean ç›¸å…³æ–¹æ³•ä¸­ï¼Œå¹¶ä¸ºç›®æ ‡ bean ç”Ÿæˆä»£ç†å¯¹è±¡</li>
<li>å°†ç”Ÿæˆçš„ bean çš„ä»£ç†å¯¹è±¡è¿”å›ç»™ BeanFactory å®¹å™¨ï¼Œåˆ°æ­¤ï¼ŒAOP é€»è¾‘æ‰§è¡Œç»“æŸ</li>
</ol>
<p>å¯¹äºä¸Šé¢çš„4æ­¥æµç¨‹ï¼Œç†Ÿæ‚‰ Spring AOP çš„æœ‹å‹åº”è¯¥èƒ½å¾ˆå®¹æ˜“ç†è§£ã€‚å¦‚æœæœ‰æœ‹å‹ä¸ç†è§£ä¹Ÿæ²¡å…³ç³»ï¼Œåœ¨åç»­ç« èŠ‚ï¼Œæˆ‘ä¼šè¯¦ç»†ä»‹ç»ç›¸å…³æµç¨‹çš„å…·ä½“å®ç°ã€‚</p>
<h2 id="3-2-åŸºäº-JDK-åŠ¨æ€ä»£ç†çš„-AOP-å®ç°"><a href="#3-2-åŸºäº-JDK-åŠ¨æ€ä»£ç†çš„-AOP-å®ç°" class="headerlink" title="3.2 åŸºäº JDK åŠ¨æ€ä»£ç†çš„ AOP å®ç°"></a>3.2 åŸºäº JDK åŠ¨æ€ä»£ç†çš„ AOP å®ç°</h2><p>æœ¬èŠ‚è¯´è¯´åŸºäº JDK åŠ¨æ€ä»£ç†çš„ä»£ç†å¯¹è±¡ç”Ÿæˆå™¨å…·ä½“å®ç°ã€‚åœ¨ toy-spring é¡¹ç›®ä¸­ï¼Œä»£ç†å¯¹è±¡ç”Ÿæˆå™¨çš„é€»è¾‘ä¸»è¦å†™åœ¨äº† JdkDynamicAopProxy ç±»ä¸­ï¼Œè¿™ä¸ªç±»çš„æœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­ getProxy æ–¹æ³•ç”¨äºç”Ÿæˆä»£ç†å¯¹è±¡ã€‚invoke æ–¹æ³•æ˜¯ InvocationHandler æ¥å£çš„å…·ä½“å®ç°ï¼ŒåŒ…å«äº†å°†é€šçŸ¥ï¼ˆAdviceï¼‰ç»‡å…¥ç›¸å…³æ–¹æ³•ä¸­ï¼Œæ˜¯3.1èŠ‚æ‰€åˆ—æµç¨‹ä¸­ç¬¬3æ­¥æµç¨‹çš„å…·ä½“å®ç°ã€‚å¥½äº†ï¼Œæ¥ä¸‹æ¥ï¼Œå¯¹ç€æºç è®²è§£ JdkDynamicAopProxyï¼š<br>JdkDynamicAopProxy å®ç°ä»£ç ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractAopProxy</span> <span class="keyword">implements</span> <span class="title">AopProxy</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">protected</span> AdvisedSupport advised;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AbstractAopProxy</span><span class="params">(AdvisedSupport advised)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">this</span>.advised = advised;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line"><span class="comment"> * åŸºäº JDK åŠ¨æ€ä»£ç†çš„ä»£ç†å¯¹è±¡ç”Ÿæˆå™¨</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line"><span class="comment"> * Created by code4wt on 17/8/16.</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="comment"> */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="keyword">final</span> <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JdkDynamicAopProxy</span> <span class="keyword">extends</span> <span class="title">AbstractAopProxy</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">JdkDynamicAopProxy</span><span class="params">(AdvisedSupport advised)</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">super</span>(advised);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * ä¸ºç›®æ ‡ bean ç”Ÿæˆä»£ç†å¯¹è±¡</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@return</span> bean çš„ä»£ç†å¯¹è±¡</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">getProxy</span><span class="params">()</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> Proxy.newProxyInstance(getClass().getClassLoader(), advised.getTargetSource().getInterfaces(), <span class="keyword">this</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * InvocationHandler æ¥å£ä¸­çš„ invoke æ–¹æ³•å…·ä½“å®ç°ï¼Œå°è£…äº†å…·ä½“çš„ä»£ç†é€»è¾‘</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> proxy</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> method</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@param</span> args</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@return</span> ä»£ç†æ–¹æ³•æˆ–åŸæ–¹æ³•çš„è¿”å›å€¼</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Throwable</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line"><span class="comment">     */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        MethodMatcher methodMatcher = advised.getMethodMatcher();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 1. ä½¿ç”¨æ–¹æ³•åŒ¹é…å™¨ methodMatcher æµ‹è¯• bean ä¸­åŸå§‹æ–¹æ³• method æ˜¯å¦ç¬¦åˆåŒ¹é…è§„åˆ™</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (methodMatcher != <span class="keyword">null</span> &amp;&amp; methodMatcher.matchers(method, advised.getTargetSource().getTargetClass())) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">// è·å– Adviceã€‚MethodInterceptor çš„çˆ¶æ¥å£ç»§æ‰¿äº† Advice</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">            MethodInterceptor methodInterceptor = advised.getMethodInterceptor();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">           <span class="comment">/*</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line"><span class="comment">            * 2. å°† bean çš„åŸå§‹æ–¹æ³• method å°è£…åœ¨ MethodInvocation æ¥å£å®ç°ç±»å¯¹è±¡ä¸­ï¼Œ</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line"><span class="comment">            * å¹¶æŠŠç”Ÿæˆçš„å¯¹è±¡ä½œä¸ºå‚æ•°ä¼ ç»™ Adivce å®ç°ç±»å¯¹è±¡ï¼Œæ‰§è¡Œé€šçŸ¥é€»è¾‘</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">41</span></pre></td><td class="code"><pre><span class="line"><span class="comment">            */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">42</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">return</span> methodInterceptor.invoke(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">43</span></pre></td><td class="code"><pre><span class="line">                    <span class="keyword">new</span> ReflectiveMethodInvocation(advised.getTargetSource().getTarget(), method, args));</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">44</span></pre></td><td class="code"><pre><span class="line">        &#125; <span class="keyword">else</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">45</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">// 2. å½“å‰ method ä¸ç¬¦åˆåŒ¹é…è§„åˆ™ï¼Œç›´æ¥è°ƒç”¨ bean çš„åŸå§‹æ–¹æ³• method</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">46</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">return</span> method.invoke(advised.getTargetSource().getTarget(), args);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">47</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">48</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">49</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>ä¸Šé¢è´´çš„ä»£ç ï¼Œå·²ç»å¯¹ JdkDynamicAopProxy å®ç°ä»£ç è¿›è¡Œäº†é€è¡Œä»‹è§£é‡Šï¼Œè¿™é‡Œä¸å†å¤šè¯´ã€‚ä¸‹é¢ç”¨ä¸ªæµç¨‹å›¾å¯¹é€šçŸ¥ç»‡å…¥é€»è¾‘è¿›è¡Œæ€»ç»“ï¼š<br><img src="http://image.winrains.cn/2019/11/ab082.png" alt="img"><br>å›¾5 toy-spring AOP é€šçŸ¥ç»‡å…¥æµç¨‹å›¾<br>æœ€åå¯¹ JdkDynamicAopProxy è¿›è¡Œç®€å•çš„æµ‹è¯•ï¼Œæµ‹è¯•ä»£ç åŠç»“æœå¦‚ä¸‹<br>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight pgsql"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> LogInterceptor implements MethodInterceptor &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    @Override</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">public</span> <span class="keyword">Object</span> invoke(MethodInvocation invocation) throws Throwable &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(invocation.getMethod().getName() + " method start");</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">Object</span> obj= invocation.proceed();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println(invocation.getMethod().getName() + " method end");</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> obj;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="built_in">public</span> <span class="keyword">class</span> JdkDynamicAopProxyTest &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    @Test</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">    <span class="built_in">public</span> <span class="type">void</span> getProxy() throws <span class="keyword">Exception</span> &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("---------- no proxy ----------");</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        HelloService helloService = <span class="built_in">new</span> HelloServiceImpl();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        helloService.sayHelloWorld();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">System</span>.<span class="keyword">out</span>.println("\n----------- proxy -----------");</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">        AdvisedSupport advisedSupport = <span class="built_in">new</span> AdvisedSupport();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        advisedSupport.setMethodInterceptor(<span class="built_in">new</span> LogInterceptor());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        TargetSource targetSource = <span class="built_in">new</span> TargetSource(</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">                helloService, HelloServiceImpl.<span class="keyword">class</span>, HelloServiceImpl.<span class="keyword">class</span>.getInterfaces());</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        advisedSupport.setTargetSource(targetSource);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">        advisedSupport.setMethodMatcher((<span class="keyword">Method</span> <span class="keyword">method</span>, <span class="keyword">Class</span> beanClass) -&gt; <span class="keyword">true</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">        helloService = (HelloService) <span class="built_in">new</span> JdkDynamicAopProxy(advisedSupport).getProxy();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">        helloService.sayHelloWorld();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœï¼š<br><img src="http://image.winrains.cn/2019/11/915b2.png" alt="img"><br>ä¸ºäº†æ§åˆ¶æ–‡ç« ç¯‡å¹…ï¼Œä¸Šé¢ä»£ç ä¸­ç”¨åˆ°çš„å…¶ä»–è¾…åŠ©ç±»ï¼Œè¿™é‡Œå°±ä¸è´´å‡ºæ¥äº†ï¼Œæƒ³çœ‹çš„æœ‹å‹å¯ä»¥åˆ° github ä¸Šä¸‹è½½æºç ã€‚</p>
<h2 id="3-3-AOP-ä¸-IOC-åä½œ"><a href="#3-3-AOP-ä¸-IOC-åä½œ" class="headerlink" title="3.3 AOP ä¸ IOC åä½œ"></a>3.3 AOP ä¸ IOC åä½œ</h2><p>ä¸Šä¸€èŠ‚ä»‹ç»äº†3.1èŠ‚æ‰€åˆ—æµç¨‹ä¸­ç¬¬3æ­¥æµç¨‹çš„å…·ä½“å®ç°ï¼Œè¿™ä¸€èŠ‚åˆ™ä¼šä»‹ç»1ã€2ã€4æ­¥æµç¨‹çš„å…·ä½“å®ç°ã€‚åœ¨ä»‹ç»ä¹‹å‰ï¼Œè¿˜è¦å†æ¬¡æä¸€ä¸‹ BeanPostProcessoræ¥å£ã€‚åœ¨ä¹‹å‰2.4èŠ‚ æ³¨å†Œ BeanPostProcessor ä¸­æˆ‘å·²ç»ä»‹ç»è¿‡ BeanPostProcessor çš„ä½œç”¨ï¼Œä¹Ÿè¯´åˆ°äº† AOP æ˜¯é€šè¿‡ BeanPostProcessor æ¥å£ä¸ IOC äº§ç”Ÿè”ç³»çš„ã€‚ä¸è¿‡2.4èŠ‚ï¼Œåªæ˜¯èœ»èœ“ç‚¹æ°´æäº†ä¸€ä¸‹ï¼Œæ²¡æœ‰è¯¦ç»†å±•å¼€è¯´æ˜ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘å°†è¯¦ç»†è®²è§£ toy-spring é¡¹ç›®ä¸­ AOP å’Œ IOC æ˜¯æ€æ ·è¢«æ•´åˆåˆ°ä¸€èµ·çš„ã€‚<br>Spring ä»2.0ç‰ˆæœ¬å¼€å§‹é›†æˆ AspectJï¼Œé€šè¿‡é›†æˆ AspectJï¼Œä¹Ÿä½¿å¾— Spring AOP çš„åŠŸèƒ½å¾—åˆ°äº†å¾ˆå¤§çš„å¢å¼ºã€‚æˆ‘ä»¬åœ¨å¹³æ—¶å¼€å‘ä¸­ï¼Œå¾ˆå¤šæ—¶å€™æ˜¯ä½¿ç”¨åŸºäº AspectJ è¡¨è¾¾å¼åŠå…¶ä»–é…ç½®æ¥å®ç°åˆ‡é¢åŠŸèƒ½ã€‚æ‰€ä»¥æˆ‘åœ¨ç¼–å†™ toy-spring é¡¹ç›®æ—¶ï¼Œä¹Ÿåœ¨é¡¹ç›®ä¸­ç®€å•é›†æˆäº† AspectJã€‚é€šè¿‡é›†æˆ AspectJï¼Œä½¿å¾— toy-spring AOP å¯ä»¥åŸºäº AspectJ è¡¨è¾¾å¼å®Œæˆå¤æ‚çš„åŒ¹é…é€»è¾‘ã€‚æ¥ä¸‹æ¥å°±è®©æˆ‘ä»¬çœ‹çœ‹è¢–çç‰ˆ Spring AOP æ˜¯æ€æ ·å®ç°çš„å§ã€‚<br>åœ¨ toy-spring ä¸­ï¼ŒAOP å’Œ IOC äº§ç”Ÿè”ç³»çš„å…·ä½“å®ç°ç±»æ˜¯ AspectJAwareAdvisorAutoProxyCreatorï¼ˆä¸‹é¢ç®€ç§° AutoProxyCreatorï¼‰ï¼Œè¿™ä¸ªç±»å®ç°äº† BeanPostProcessor å’Œ BeanFactoryAware æ¥å£ã€‚BeanFactory åœ¨æ³¨å†Œ BeanPostProcessor æ¥å£ç›¸å…³å®ç°ç±»çš„é˜¶æ®µï¼Œä¼šå°†å…¶æœ¬èº«æ³¨å…¥åˆ° AutoProxyCreator ä¸­ï¼Œä¸ºåé¢ AOP ç»™ bean ç”Ÿæˆä»£ç†å¯¹è±¡åšå‡†å¤‡ã€‚BeanFactory åˆå§‹åŒ–ç»“æŸåï¼ŒAOP ä¸ IOC æ¡¥æ¢ç±» AutoProxyCreator ä¹Ÿå®Œæˆäº†å®ä¾‹åŒ–ï¼Œå¹¶è¢«ç¼“å­˜åœ¨ BeanFactory ä¸­ï¼Œé™å¾… BeanFactory å®ä¾‹åŒ– beanã€‚å½“å¤–éƒ¨äº§ç”Ÿè°ƒç”¨ï¼ŒBeanFactory å¼€å§‹å®ä¾‹åŒ– bean æ—¶ã€‚AutoProxyCreator å°±å¼€å§‹æ‚„æ‚„çš„å·¥ä½œäº†ï¼Œå·¥ä½œç»†èŠ‚å¦‚ä¸‹ï¼š</p>
<ol>
<li>ä» BeanFactory æŸ¥æ‰¾å®ç°äº† PointcutAdvisor æ¥å£çš„åˆ‡é¢å¯¹è±¡ï¼Œåˆ‡é¢å¯¹è±¡ä¸­åŒ…å«äº†å®ç° Pointcut å’Œ Advice æ¥å£çš„å¯¹è±¡ã€‚</li>
<li>ä½¿ç”¨ Pointcut ä¸­çš„è¡¨è¾¾å¼å¯¹è±¡åŒ¹é…å½“å‰ bean å¯¹è±¡ã€‚å¦‚æœåŒ¹é…æˆåŠŸï¼Œè¿›è¡Œä¸‹ä¸€æ­¥ã€‚å¦åˆ™ç»ˆæ­¢é€»è¾‘ï¼Œè¿”å› beanã€‚</li>
<li>JdkDynamicAopProxy å¯¹è±¡ä¸ºåŒ¹é…åˆ°çš„ bean ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå¹¶å°†ä»£ç†å¯¹è±¡è¿”å›ç»™ BeanFactoryã€‚</li>
</ol>
<p>ç»è¿‡ä¸Šé¢3æ­¥ï¼ŒAutoProxyCreator å°±æ‚„æ— å£°æ¯çš„æŠŠåŸæ¥çš„ bean æ›¿æ¢ä¸ºä»£ç†å¯¹è±¡äº†ï¼Œæ˜¯ä¸æ˜¯æœ‰ç§å·å¤©æ¢æ—¥çš„æ„Ÿè§‰ã€‚æœ€åæŠŠ toy-spring AOP å‰©ä½™çš„å®ç°ä»£ç è´´å‡ºæ¥ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> AspectJAwareAdvisorAutoProxyCreator implements BeanPostProcessor, BeanFactoryAware &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> XmlBeanFactory xmlBeanFactory;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    @Override</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">    public Object post<span class="constructor">ProcessBeforeInitialization(Object <span class="params">bean</span>, String <span class="params">beanName</span>)</span> throws Exception &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        return bean;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">    @Override</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    public Object post<span class="constructor">ProcessAfterInitialization(Object <span class="params">bean</span>, String <span class="params">beanName</span>)</span> throws Exception &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">/* è¿™é‡Œä¸¤ä¸ª if åˆ¤æ–­å¾ˆæœ‰å¿…è¦ï¼Œå¦‚æœåˆ é™¤å°†ä¼šä½¿ç¨‹åºè¿›å…¥æ­»å¾ªç¯çŠ¶æ€ï¼Œ</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line"><span class="comment">         * æœ€ç»ˆå¯¼è‡´ StackOverflowError é”™è¯¯å‘ç”Ÿ</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line"><span class="comment">         */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (bean instanceof AspectJExpressionPointcutAdvisor) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">13</span></pre></td><td class="code"><pre><span class="line">            return bean;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">14</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">15</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">if</span> (bean instanceof MethodInterceptor) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">16</span></pre></td><td class="code"><pre><span class="line">            return bean;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">17</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">18</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 1.  ä» BeanFactory æŸ¥æ‰¾ AspectJExpressionPointcutAdvisor ç±»å‹çš„å¯¹è±¡</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">19</span></pre></td><td class="code"><pre><span class="line">        List&lt;AspectJExpressionPointcutAdvisor&gt; advisors =</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">20</span></pre></td><td class="code"><pre><span class="line">                xmlBeanFactory.get<span class="constructor">BeansForType(AspectJExpressionPointcutAdvisor.<span class="params">class</span>)</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">21</span></pre></td><td class="code"><pre><span class="line">        for (AspectJExpressionPointcutAdvisor advisor : advisors) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">22</span></pre></td><td class="code"><pre><span class="line">            <span class="comment">// 2. ä½¿ç”¨ Pointcut å¯¹è±¡åŒ¹é…å½“å‰ bean å¯¹è±¡</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">23</span></pre></td><td class="code"><pre><span class="line">            <span class="keyword">if</span> (advisor.get<span class="constructor">Pointcut()</span>.get<span class="constructor">ClassFilter()</span>.matchers(bean.get<span class="constructor">Class()</span>)) &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">24</span></pre></td><td class="code"><pre><span class="line">                ProxyFactory advisedSupport = <span class="keyword">new</span> <span class="constructor">ProxyFactory()</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">25</span></pre></td><td class="code"><pre><span class="line">                advisedSupport.set<span class="constructor">MethodInterceptor((MethodInterceptor)</span> advisor.get<span class="constructor">Advice()</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">26</span></pre></td><td class="code"><pre><span class="line">                advisedSupport.set<span class="constructor">MethodMatcher(<span class="params">advisor</span>.<span class="params">getPointcut</span>()</span>.get<span class="constructor">MethodMatcher()</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">27</span></pre></td><td class="code"><pre><span class="line">                TargetSource targetSource = <span class="keyword">new</span> <span class="constructor">TargetSource(<span class="params">bean</span>, <span class="params">bean</span>.<span class="params">getClass</span>()</span>, bean.get<span class="constructor">Class()</span>.get<span class="constructor">Interfaces()</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">28</span></pre></td><td class="code"><pre><span class="line">                advisedSupport.set<span class="constructor">TargetSource(<span class="params">targetSource</span>)</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">29</span></pre></td><td class="code"><pre><span class="line">                <span class="comment">// 3. ç”Ÿæˆä»£ç†å¯¹è±¡ï¼Œå¹¶è¿”å›</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">30</span></pre></td><td class="code"><pre><span class="line">                return advisedSupport.get<span class="constructor">Proxy()</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">31</span></pre></td><td class="code"><pre><span class="line">            &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">32</span></pre></td><td class="code"><pre><span class="line">        &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">33</span></pre></td><td class="code"><pre><span class="line">        <span class="comment">// 2. åŒ¹é…å¤±è´¥ï¼Œè¿”å› bean</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">34</span></pre></td><td class="code"><pre><span class="line">        return bean;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">35</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">36</span></pre></td><td class="code"><pre><span class="line">    @Override</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">37</span></pre></td><td class="code"><pre><span class="line">    public void set<span class="constructor">BeanFactory(BeanFactory <span class="params">beanFactory</span>)</span> throws Exception &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">38</span></pre></td><td class="code"><pre><span class="line">        xmlBeanFactory = (XmlBeanFactory) beanFactory;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">39</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">40</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>ProxyFactory å®ç°ä»£ç ï¼š</p>
<figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line"><span class="comment"> * AopProxy å®ç°ç±»çš„å·¥å‚ç±»</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line"><span class="comment"> */</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">public <span class="class"><span class="keyword">class</span> <span class="title">ProxyFactory</span> <span class="keyword">extends</span> <span class="title">AdvisedSupport</span> <span class="title">implements</span> <span class="title">AopProxy</span> </span>&#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">    <span class="meta">@Override</span></span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">    public <span class="type">Object</span> getProxy() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> createAopProxy().getProxy();</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    <span class="keyword">private</span> <span class="type">AopProxy</span> createAopProxy() &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> <span class="type">JdkDynamicAopProxy</span>(<span class="keyword">this</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">11</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">12</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>æµ‹è¯•ç±»ï¼š</p>
<figure class="highlight reasonml"><table><tr><td class="gutter"><pre><span class="line">1</span></pre></td><td class="code"><pre><span class="line">public <span class="keyword">class</span> XmlBeanFactoryTest &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">2</span></pre></td><td class="code"><pre><span class="line">    @Test</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">3</span></pre></td><td class="code"><pre><span class="line">    public void get<span class="constructor">Bean()</span> throws Exception &#123;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">4</span></pre></td><td class="code"><pre><span class="line">        <span class="module-access"><span class="module"><span class="identifier">System</span>.</span></span>out.println(<span class="string">"--------- AOP test ----------"</span>);</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">5</span></pre></td><td class="code"><pre><span class="line">        String location = get<span class="constructor">Class()</span>.get<span class="constructor">ClassLoader()</span>.get<span class="constructor">Resource(<span class="string">"spring.xml"</span>)</span>.get<span class="constructor">File()</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">6</span></pre></td><td class="code"><pre><span class="line">        XmlBeanFactory bf = <span class="keyword">new</span> <span class="constructor">XmlBeanFactory(<span class="params">location</span>)</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">7</span></pre></td><td class="code"><pre><span class="line">        HelloService helloService = (HelloService) bf.get<span class="constructor">Bean(<span class="string">"helloService"</span>)</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">8</span></pre></td><td class="code"><pre><span class="line">        helloService.say<span class="constructor">HelloWorld()</span>;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">9</span></pre></td><td class="code"><pre><span class="line">    &#125;</span></pre></td></tr><tr><td class="gutter"><pre><span class="line">10</span></pre></td><td class="code"><pre><span class="line">&#125;</span></pre></td></tr></table></figure>

<p>æµ‹è¯•ç»“æœï¼š<br><img src="http://image.winrains.cn/2019/11/e4614.png" alt="img"></p>
<h1 id="4-å†™åœ¨æœ€å"><a href="#4-å†™åœ¨æœ€å" class="headerlink" title="4. å†™åœ¨æœ€å"></a>4. å†™åœ¨æœ€å</h1><p>åˆ°æ­¤ï¼Œæœ¬æ–‡çš„ä¸»è¦å†…å®¹å†™å®Œäº†ã€‚å¦‚æœä½ è€å¿ƒçš„è¯»å®Œäº†æ–‡ç« ï¼Œå¹¶æ„Ÿè§‰ä¸é”™çš„è¯ï¼Œæ¬¢è¿çŒ›ç‚¹èµå’Œæ”¶è—æŒ‰é’®ã€‚è¿™ç¯‡æ–‡ç« èŠ±äº†æˆ‘ä¸€å¤©çš„æ—¶é—´ï¼Œå†™çš„å®åœ¨æœ‰ç‚¹ç´¯ï¼Œä¹Ÿæ·±æ„Ÿè®¤çœŸå†™åšå®¢çš„ä¸æ˜“ã€‚æœ¬ç¯‡æ–‡ç« ä¸ <a href="https://segmentfault.com/a/1190000010745705" target="_blank" rel="noopener">ä»¿ç…§ Spring å®ç°ç®€å•çš„ IOC å’Œ AOP - ä¸Šç¯‡</a>ï¼Œ<a href="https://segmentfault.com/a/1190000010734016" target="_blank" rel="noopener">Spring beançš„ç”Ÿå‘½æµç¨‹</a> å…±ä¸‰ç¯‡æ–‡ç« ï¼Œå¯¹ Spring IOC å’Œ AOP çš„å®ç°åŸç†è¿›è¡Œäº†è¾ƒä¸ºè¯¦ç»†çš„ç»“æŸã€‚ä¹Ÿæ˜¯é€šè¿‡è®¤çœŸç¼–å†™è¿™ä¸‰ç¯‡æ–‡ç« ï¼Œä½¿å¾—æˆ‘å¯¹ Spring æ¡†æ¶åŸç†æœ‰äº†æ›´è¿›ä¸€æ­¥çš„è®¤è¯†ã€‚å½“ç„¶é™äºæˆ‘çš„ç»éªŒå’Œèƒ½åŠ›ï¼Œä»¥ä¸Šä¸‰ç¯‡æ–‡ç« ä¸­å¯èƒ½å­˜åœ¨ç€ä¸€äº›é”™è¯¯ã€‚å¦‚æœè¿™äº›é”™è¯¯ç»™å¤§å®¶é€ æˆäº†å¹²æ‰°ï¼Œæˆ‘è¡¨ç¤ºå¾ˆæŠ±æ­‰ã€‚æ‰€ä»¥æ–‡ç« è‹¥æœ‰ç–æ¼ä¸å¦¥ä¹‹å¤„ï¼Œè¿˜è¯·æŒ‡å‡ºæ¥ï¼Œå¦‚æœèƒ½ä¸åèµæ•™ï¼Œé‚£å°±æ›´å¥½äº†ã€‚å¥½äº†ï¼Œæœ€åæ„Ÿè°¢å¤§å®¶è€å¿ƒè¯»å®Œæˆ‘çš„æ–‡ç« ï¼Œä¸‹æ¬¡å†è§ã€‚</p>
<h1 id="å‚è€ƒï¼š"><a href="#å‚è€ƒï¼š" class="headerlink" title="å‚è€ƒï¼š"></a>å‚è€ƒï¼š</h1><ul>
<li>ã€ŠSpringæ­ç§˜ã€‹</li>
<li><a href="https://github.com/code4craft/tiny-spring" target="_blank" rel="noopener">tiny-spring</a></li>
</ul>
<h1 id="é™„å½•ï¼šSpring-æºç åˆ†ææ–‡ç« åˆ—è¡¨"><a href="#é™„å½•ï¼šSpring-æºç åˆ†ææ–‡ç« åˆ—è¡¨" class="headerlink" title="é™„å½•ï¼šSpring æºç åˆ†ææ–‡ç« åˆ—è¡¨"></a>é™„å½•ï¼šSpring æºç åˆ†ææ–‡ç« åˆ—è¡¨</h1><h2 id="â… -IOC"><a href="#â… -IOC" class="headerlink" title="â… . IOC"></a>â… . IOC</h2><table>
<thead>
<tr>
<th>æ›´æ–°æ—¶é—´</th>
<th>æ ‡é¢˜</th>
</tr>
</thead>
<tbody><tr>
<td>2018-05-30</td>
<td><a href="http://www.coolblog.xyz/2018/05/30/Spring-IOC-å®¹å™¨æºç åˆ†æç³»åˆ—æ–‡ç« å¯¼è¯»/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æç³»åˆ—æ–‡ç« å¯¼è¯»</a></td>
</tr>
<tr>
<td>2018-06-01</td>
<td><a href="http://www.coolblog.xyz/2018/06/01/Spring-IOC-å®¹å™¨æºç åˆ†æ-è·å–å•ä¾‹-bean/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - è·å–å•ä¾‹ bean</a></td>
</tr>
<tr>
<td>2018-06-04</td>
<td><a href="http://www.coolblog.xyz/2018/06/04/Spring-IOC-å®¹å™¨æºç åˆ†æ-åˆ›å»ºå•ä¾‹-bean/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - åˆ›å»ºå•ä¾‹ bean çš„è¿‡ç¨‹</a></td>
</tr>
<tr>
<td>2018-06-06</td>
<td><a href="http://www.coolblog.xyz/2018/06/06/Spring-IOC-å®¹å™¨æºç åˆ†æ-åˆ›å»ºåŸå§‹-bean-å¯¹è±¡/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - åˆ›å»ºåŸå§‹ bean å¯¹è±¡</a></td>
</tr>
<tr>
<td>2018-06-08</td>
<td><a href="http://www.coolblog.xyz/2018/06/08/Spring-IOC-å®¹å™¨æºç åˆ†æ-å¾ªç¯ä¾èµ–çš„è§£å†³åŠæ³•/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - å¾ªç¯ä¾èµ–çš„è§£å†³åŠæ³•</a></td>
</tr>
<tr>
<td>2018-06-11</td>
<td><a href="http://www.coolblog.xyz/2018/06/11/Spring-IOC-å®¹å™¨æºç åˆ†æ-å¡«å……å±æ€§åˆ°-bean-åŸå§‹å¯¹è±¡/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - å¡«å……å±æ€§åˆ° bean åŸå§‹å¯¹è±¡</a></td>
</tr>
<tr>
<td>2018-06-11</td>
<td><a href="http://www.coolblog.xyz/2018/06/11/Spring-IOC-å®¹å™¨æºç åˆ†æ-ä½™ä¸‹çš„åˆå§‹åŒ–å·¥ä½œ/" target="_blank" rel="noopener">Spring IOC å®¹å™¨æºç åˆ†æ - ä½™ä¸‹çš„åˆå§‹åŒ–å·¥ä½œ</a></td>
</tr>
</tbody></table>
<h2 id="â…¡-AOP"><a href="#â…¡-AOP" class="headerlink" title="â…¡. AOP"></a>â…¡. AOP</h2><table>
<thead>
<tr>
<th>æ›´æ–°æ—¶é—´</th>
<th>æ ‡é¢˜</th>
</tr>
</thead>
<tbody><tr>
<td>2018-06-17</td>
<td><a href="http://www.coolblog.xyz/2018/06/17/Spring-AOP-æºç åˆ†æç³»åˆ—æ–‡ç« å¯¼è¯»/" target="_blank" rel="noopener">Spring AOP æºç åˆ†æç³»åˆ—æ–‡ç« å¯¼è¯»</a></td>
</tr>
<tr>
<td>2018-06-20</td>
<td><a href="http://www.coolblog.xyz/2018/06/20/Spring-AOP-æºç åˆ†æ-ç­›é€‰åˆé€‚çš„é€šçŸ¥å™¨/" target="_blank" rel="noopener">Spring AOP æºç åˆ†æ - ç­›é€‰åˆé€‚çš„é€šçŸ¥å™¨</a></td>
</tr>
<tr>
<td>2018-06-20</td>
<td><a href="http://www.coolblog.xyz/2018/06/20/Spring-AOP-æºç åˆ†æ-ç­›é€‰åˆé€‚çš„é€šçŸ¥å™¨/" target="_blank" rel="noopener">Spring AOP æºç åˆ†æ - åˆ›å»ºä»£ç†å¯¹è±¡</a></td>
</tr>
<tr>
<td>2018-06-22</td>
<td><a href="http://www.coolblog.xyz/2018/06/22/Spring-AOP-æºç åˆ†æ-æ‹¦æˆªå™¨é“¾çš„æ‰§è¡Œè¿‡ç¨‹/" target="_blank" rel="noopener">Spring AOP æºç åˆ†æ - æ‹¦æˆªå™¨é“¾çš„æ‰§è¡Œè¿‡ç¨‹</a></td>
</tr>
</tbody></table>
<h2 id="â…¢-MVC"><a href="#â…¢-MVC" class="headerlink" title="â…¢. MVC"></a>â…¢. MVC</h2><table>
<thead>
<tr>
<th>æ›´æ–°æ—¶é—´</th>
<th>æ ‡é¢˜</th>
</tr>
</thead>
<tbody><tr>
<td>2018-06-29</td>
<td><a href="http://www.coolblog.xyz/2018/06/29/Spring-MVC-åŸç†æ¢ç§˜-ä¸€ä¸ªè¯·æ±‚çš„æ—…è¡Œè¿‡ç¨‹/" target="_blank" rel="noopener">Spring MVC åŸç†æ¢ç§˜ - ä¸€ä¸ªè¯·æ±‚çš„æ—…è¡Œè¿‡ç¨‹</a></td>
</tr>
<tr>
<td>2018-06-30</td>
<td><a href="http://www.coolblog.xyz/2018/06/30/Spring-MVC-åŸç†æ¢ç§˜-å®¹å™¨çš„åˆ›å»ºè¿‡ç¨‹/" target="_blank" rel="noopener">Spring MVC åŸç†æ¢ç§˜ - å®¹å™¨çš„åˆ›å»ºè¿‡ç¨‹</a></td>
</tr>
</tbody></table>
<blockquote>
<p>ä½œè€…ï¼šç”°å°æ³¢</p>
<p>æ¥æºï¼š<a href="https://www.tianxiaobo.com/2018/01/18/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP-%E4%B8%8B%E7%AF%87/" target="_blank" rel="noopener">https://www.tianxiaobo.com/2018/01/18/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP-%E4%B8%8B%E7%AF%87/</a></p>
</blockquote>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/AOP/" rel="tag"># AOP</a>
              <a href="/tags/IoC/" rel="tag"># IoC</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/08/%E8%87%AA%E5%B7%B1%E5%8A%A8%E6%89%8B%E5%AE%9E%E7%8E%B0%E7%9A%84-Spring-IOC-%E5%92%8C-AOP%EF%BC%88%E4%B8%8A%EF%BC%89/" rel="prev" title="è‡ªå·±åŠ¨æ‰‹å®ç°çš„ Spring IOC å’Œ AOPï¼ˆä¸Šï¼‰">
      <i class="fa fa-chevron-left"></i> è‡ªå·±åŠ¨æ‰‹å®ç°çš„ Spring IOC å’Œ AOPï¼ˆä¸Šï¼‰
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/01/08/LinkedHashMap-%E6%BA%90%E7%A0%81%E8%AF%A6%E7%BB%86%E5%88%86%E6%9E%90%EF%BC%88JDK1-8%EF%BC%89/" rel="next" title="LinkedHashMap æºç è¯¦ç»†åˆ†æï¼ˆJDK1.8ï¼‰">
      LinkedHashMap æºç è¯¦ç»†åˆ†æï¼ˆJDK1.8ï¼‰ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-èƒŒæ™¯"><span class="nav-number">1.</span> <span class="nav-text">1. èƒŒæ™¯</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#2-IOC-çš„å®ç°"><span class="nav-number">2.</span> <span class="nav-text">2. IOC çš„å®ç°</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#2-1-BeanFactory-çš„ç”Ÿå‘½æµç¨‹"><span class="nav-number">2.1.</span> <span class="nav-text">2.1 BeanFactory çš„ç”Ÿå‘½æµç¨‹</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-2-BeanDefinition-åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»"><span class="nav-number">2.2.</span> <span class="nav-text">2.2 BeanDefinition åŠå…¶ä»–ä¸€äº›ç±»çš„ä»‹ç»</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-3-xml-çš„è§£æ"><span class="nav-number">2.3.</span> <span class="nav-text">2.3 xml çš„è§£æ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-4-æ³¨å†Œ-BeanPostProcessor"><span class="nav-number">2.4.</span> <span class="nav-text">2.4 æ³¨å†Œ BeanPostProcessor</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-5-getBean-è¿‡ç¨‹è§£æ"><span class="nav-number">2.5.</span> <span class="nav-text">2.5 getBean è¿‡ç¨‹è§£æ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#3-å®ç°-AOP"><span class="nav-number">3.</span> <span class="nav-text">3. å®ç° AOP</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#3-1-AOP-åŸç†"><span class="nav-number">3.1.</span> <span class="nav-text">3.1 AOP åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-2-åŸºäº-JDK-åŠ¨æ€ä»£ç†çš„-AOP-å®ç°"><span class="nav-number">3.2.</span> <span class="nav-text">3.2 åŸºäº JDK åŠ¨æ€ä»£ç†çš„ AOP å®ç°</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-3-AOP-ä¸-IOC-åä½œ"><span class="nav-number">3.3.</span> <span class="nav-text">3.3 AOP ä¸ IOC åä½œ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#4-å†™åœ¨æœ€å"><span class="nav-number">4.</span> <span class="nav-text">4. å†™åœ¨æœ€å</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒï¼š"><span class="nav-number">5.</span> <span class="nav-text">å‚è€ƒï¼š</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#é™„å½•ï¼šSpring-æºç åˆ†ææ–‡ç« åˆ—è¡¨"><span class="nav-number">6.</span> <span class="nav-text">é™„å½•ï¼šSpring æºç åˆ†ææ–‡ç« åˆ—è¡¨</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#â… -IOC"><span class="nav-number">6.1.</span> <span class="nav-text">â… . IOC</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#â…¡-AOP"><span class="nav-number">6.2.</span> <span class="nav-text">â…¡. AOP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#â…¢-MVC"><span class="nav-number">6.3.</span> <span class="nav-text">â…¢. MVC</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">congsheng.wang</p>
  <div class="site-description" itemprop="description">trouble is a friend</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">984</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">94</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">156</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">congsheng.wang</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> å¼ºåŠ›é©±åŠ¨ v4.0.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">ä¸»é¢˜ â€“ <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script>
<script src="/js/schemes/pisces.js"></script>
<script src="/js/next-boot.js"></script>



  




  <script src="/js/local-search.js"></script>












  

  

</body>
</html>
